<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prediksi Lawan Mcgogo</title>

<style>
body { background:#020617; color:#e5e7eb; font-family:Arial,sans-serif; padding:16px; margin:0; }
h1 { text-align:center; font-size:22px; margin-bottom:24px; }
button, input { padding:10px 12px; border:none; border-radius:6px; font-size:14px; outline:none; }
button { background:#2563eb; color:#fff; font-weight:bold; cursor:pointer; transition:background 0.2s; }
button:hover { background:#1e40af; }
#x2 div { margin-bottom:12px; }
#x2 input { width:100%; box-sizing:border-box; }
#x1 button { margin-top:16px; width:100%; }
.op { background:#1e293b; width:100%; text-align:left; margin-bottom:6px; cursor:pointer; transition:background 0.2s; }
.op:hover { background:#334155; }
.box { border:1px solid #1e293b; padding:12px; border-radius:6px; margin-top:12px; }
#h { font-size:13px; max-height:60px; overflow-y:auto; }
#p { font-weight:bold; color:#22c55e; font-size:15px; margin-top:4px; }
.ctrl { display:flex; gap:8px; margin-top:12px; }
.ctrl button { flex:1; }
.ft { text-align:center; margin-top:18px; color:#38bdf8; font-weight:bold; min-height:20px; }
.statusBtn { background:#f59e0b; font-size:12px; padding:4px 6px; margin-left:6px; border-radius:4px; cursor:pointer; }
.statusBtn.dead { background:#ef4444; }
.playerWrapper { display:flex; justify-content:space-between; margin-bottom:6px; }
</style>
</head>

<body>

<h1>Prediksi Lawan Mcgogo</h1>

<div id="x1">
  <div id="x2"></div>
  <button onclick="_a()">Mulai</button>
  <button onclick="_addInput()">Tambah pemain</button>
</div>

<div id="x3" style="display:none">
  <div class="box"><div id="x4"></div></div>
  <div class="box">
    <b>Riwayat:</b>
    <div id="h">-</div>
    <b>Prediksi:</b>
    <div id="p">-</div>
  </div>
  <div class="ctrl">
    <button onclick="_u()">Undo</button>
    <button onclick="_r()">Redo</button>
    <button onclick="_m()">Menu</button>
  </div>
  <div class="ft" id="f"></div>
</div>

<script>
(()=>{
let A=[],B=[],C=[],D=[],E={};
const T="Tiktok @Ashskie_ (Ashskuy)";
const I=document.getElementById("x2");

// ===== INPUT DINAMIS =====
for(let i=0;i<7;i++)_addInput();
window._addInput=function(){
  const d=document.createElement("div");
  const t=document.createElement("input");
  t.placeholder="Pemain "+(I.children.length+1);
  d.appendChild(t);
  I.appendChild(d);
}

// ===== MULAI =====
window._a=function(){
  A=[];B=[];C=[];D=[];E={};
  document.querySelectorAll("#x2 input").forEach(v=>{
    let s=v.value.trim();
    if(s){A.push(s);E[s]="alive";}
  });
  if(A.length===0)return alert("Isi minimal 1 pemain!");
  x1.style.display="none";
  x3.style.display="block";
  _b(); _p(); _t();
};

// ===== RENDER BUTTON PEMAIN =====
function _b(){
  x4.innerHTML="";
  A.forEach(n=>{
    const wrapper=document.createElement("div");
    wrapper.className="playerWrapper";

    let btn=document.createElement("button");
    btn.className="op";
    btn.innerText=n;
    btn.disabled = (E[n]!=="alive");
    btn.onclick=()=>_c(n);

    let sBtn=document.createElement("button");
    sBtn.className="statusBtn "+(E[n]!=="alive"?"dead":"");
    sBtn.innerText= (E[n]==="alive")?"Mati":"Hidup";
    sBtn.onclick=(e)=>{
      e.stopPropagation();
      E[n]= (E[n]==="alive")?"dead":"alive";
      sBtn.innerText= (E[n]==="alive")?"Mati":"Hidup";
      sBtn.classList.toggle("dead");
      _b(); _p();
    }

    wrapper.appendChild(btn);
    wrapper.appendChild(sBtn);
    x4.appendChild(wrapper);
  });
}

// ===== KLIK PEMAIN =====
function _c(n){
  B.push(n);
  C.push(n);
  D=[];
  _p(); _b();
}

// ===== PREDIKSI =====
function _p(){
  const alive=A.filter(a=>E[a]==="alive");
  if(alive.length===0){p.innerText="-"; return;}
  let m={};
  A.forEach(v=>m[v]=B.lastIndexOf(v));
  let candidates = alive.slice().sort((x,y)=> m[x]-m[y]);
  h.innerText = B.join(" â†’ ")||"-";
  p.innerText = candidates[0]||"-";
}

// ===== UNDO / REDO =====
window._u=function(){
  if(!C.length)return;
  let x=C.pop();
  D.push(x);
  B.splice(B.lastIndexOf(x),1);
  _p(); _b();
}
window._r=function(){
  if(!D.length)return;
  let x=D.pop();
  C.push(x);
  B.push(x);
  _p(); _b();
}

// ===== MENU =====
window._m=function(){
  x3.style.display="none";
  x1.style.display="block";
  A=[];B=[];C=[];D=[];E={};
}

// ===== FOOTER TYPING =====
function _t(){
  let i=0; f.innerText="";
  (function s(){
    if(i<=T.length){
      f.innerText=T.slice(0,i++);
      setTimeout(s,120);
    }else{
      setTimeout(()=>{i=0; f.innerText=""; s()},1800);
    }
  })();
}
})();
</script>

</body>
</html>
